<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ADDA LAUNDRY - Data Transaksi</title>

<style>
body{font-family:Arial;margin:0;background:#f4f4f4}
.container{width:90%;margin:50px auto;background:#fff;padding:20px;border-radius:8px}
.navbar{background:#3efa41;overflow:hidden}
.navbar a{float:left;color:#fff;padding:14px 20px;text-decoration:none;font-weight:bold}
.navbar a.active{background:#2eac30}

.content-section{display:none}

table{width:100%;border-collapse:collapse;margin-top:20px}
th,td{border:1px solid #000;padding:10px;text-align:center}
th{background:#3efa41;color:white}

.phone-input{width:130px;padding:5px}
.save-phone-btn{
  padding:5px 10px;
  margin-left:5px;
  background:#3efa41;
  border:none;
  color:white;
  cursor:pointer;
  border-radius:4px;
  display:none;
}
</style>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
</head>

<body>

<div class="navbar">
  <a href="#" class="nav-link active" data-target="home-section">Home</a>
  <a href="#" class="nav-link" data-target="data-section">Data Pelanggan</a>
</div>

<div class="container">

<!-- ================= HOME (ASLI â€“ TIDAK DIUBAH) ================= -->
<div id="home-section" class="content-section" style="display:block;">
  <h1>Selamat Datang di ADDA Laundry ðŸ§º</h1>

  <p>
    ADDA Laundry menyediakan layanan pencucian profesional untuk memenuhi kebutuhan pakaian bersih Anda.
  </p>

  <h3>Pilihan Layanan:</h3>
  <ul>
    <li>Layanan Biasa â€“ 5 Hari â€“ Rp7.000/KG</li>
    <li>Layanan Sedang â€“ 3 Hari â€“ Rp9.000/KG</li>
    <li>Layanan Cepat â€“ 1 Hari â€“ Rp10.000/KG</li>
  </ul>

  <p><b>Kontak Admin:</b> +62 813-8431-3155</p>
  <p style="color:red;font-weight:bold">WAJIB membawa struk transaksi</p>
</div>

<!-- ================= DATA ================= -->
<div id="data-section" class="content-section">
<h1>Data Pelanggan</h1>

<table id="laundryTable">
<thead>
<tr>
<th>No</th>
<th>Nama</th>
<th>No Telepon</th>
<th>Harga</th>
<th>Berat</th>
<th>Kode</th>
</tr>
</thead>
<tbody></tbody>
</table>

</div>
</div>

<script>
const firebaseConfig = {
 apiKey: "AIzaSyA0nLjuJd1cah3yHkcWLNvmqPA5cAnSOjI",
 databaseURL: "https://tongsampah1-a-default-rtdb.firebaseio.com"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

let allData = [];

function loadData(){
 db.ref("databasee").once("value", snap=>{
  allData=[];
  snap.forEach(c=>{
    let d=c.val();
    d.key=c.key;
    allData.push(d);
  });
  renderTable();
 });
}

function renderTable(){
 const tb=$("#laundryTable tbody");
 tb.empty();
 allData.forEach((d,i)=>{
 tb.append(`
 <tr>
  <td>${i+1}</td>
  <td>${d.nama||'-'}</td>
  <td>
    <input class="phone-input" data-key="${d.key}" value="${d.telepon||''}">
    <button class="save-phone-btn" data-key="${d.key}">OK</button>
  </td>
  <td>${d.harga||0}</td>
  <td>${d.berat||0}</td>
  <td>${d.code||d.key}</td>
 </tr>
 `);
 });
}

/* tampilkan tombol OK saat diketik */
$(document).on("input",".phone-input",function(){
 $(this).siblings(".save-phone-btn").show();
});

/* simpan saat klik OK */
$(document).on("click",".save-phone-btn",function(){
 const key=$(this).data("key");
 const phone=$(this).siblings(".phone-input").val();
 db.ref("databasee/"+key).update({telepon:phone});
 $(this).hide();
 alert("Nomor telepon disimpan");
});

/* NAVIGASI */
$(".nav-link").click(function(e){
 e.preventDefault();
 $(".content-section").hide();
 $("#"+$(this).data("target")).show();
 $(".nav-link").removeClass("active");
 $(this).addClass("active");

 if($(this).data("target")==="data-section"){
   loadData();
 }
});
</script>

</body>
</html>
